---
 webkit/tools/npapi_layout_test_plugin/PluginObject.cpp |    5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

Index: chromium-browser/webkit/tools/npapi_layout_test_plugin/PluginObject.cpp
===================================================================
--- chromium-browser.orig/webkit/tools/npapi_layout_test_plugin/PluginObject.cpp
+++ chromium-browser/webkit/tools/npapi_layout_test_plugin/PluginObject.cpp
@@ -552,17 +552,20 @@
     char* path = toCString(pathString);
 
     NPString contentsString = NPVARIANT_TO_STRING(args[3]);
 
     FILE* tempFile = fopen(path, "w");
     if (!tempFile)
         return false;
 
-    fwrite(contentsString.UTF8Characters, contentsString.UTF8Length, 1, tempFile);
+    size_t size = fwrite(contentsString.UTF8Characters, contentsString.UTF8Length, 1, tempFile);
+    if (size != contentsString.UTF8Length)
+        return false;
+
     fclose(tempFile);
 
     NPError error = browser->posturl(obj->npp, url, target, pathString.UTF8Length, path, TRUE);
 
     free(path);
     free(target);
     free(url);
 
