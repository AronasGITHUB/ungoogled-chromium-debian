---
 build/common.gypi      |    2 +-
 build/linux/system.gyp |   11 +++++++++++
 net/net.gyp            |    8 ++++++++
 webkit/webkit.gyp      |    8 ++++++++
 4 files changed, 28 insertions(+), 1 deletion(-)

Index: src/build/linux/system.gyp
===================================================================
--- src.orig/build/linux/system.gyp
+++ src/build/linux/system.gyp
@@ -1,15 +1,26 @@
 # Copyright (c) 2009 The Chromium Authors. All rights reserved.
 # Use of this source code is governed by a BSD-style license that can be
 # found in the LICENSE file.
 
 {
   'targets': [
     {
+      'target_name': 'v8',
+      'type': 'settings',
+      'direct_dependent_settings': {
+      },
+      'link_settings': {
+        'libraries': [
+          '-lv8',
+        ],
+      },
+    },
+    {
       'target_name': 'gtk',
       'type': 'settings',
       'direct_dependent_settings': {
         'cflags': [
           '<!@(pkg-config --cflags gtk+-2.0)',
         ],
       },
       'link_settings': {
Index: src/webkit/webkit.gyp
===================================================================
--- src.orig/webkit/webkit.gyp
+++ src/webkit/webkit.gyp
@@ -778,16 +778,24 @@
         ['javascript_engine=="v8"', {
           'dependencies': [
             '../v8/tools/gyp/v8.gyp:v8',
           ],
           'export_dependent_settings': [
             '../v8/tools/gyp/v8.gyp:v8',
           ],
         }],
+        ['javascript_engine=="system-v8"', {
+          'dependencies': [
+            '../build/linux/system.gyp:v8',
+          ],
+          'export_dependent_settings': [
+            '../build/linux/system.gyp:v8',
+          ],
+        }],
         ['OS=="linux"', {
           'dependencies': [
             '../build/linux/system.gyp:fontconfig',
             '../build/linux/system.gyp:gtk',
           ],
           'sources': [
             '../third_party/WebKit/WebCore/platform/graphics/chromium/VDMXParser.cpp',
             '../third_party/WebKit/WebCore/platform/graphics/chromium/HarfbuzzSkia.cpp',
Index: src/build/common.gypi
===================================================================
--- src.orig/build/common.gypi
+++ src/build/common.gypi
@@ -39,17 +39,17 @@
     # Set to 1 to enable code coverage.  In addition to build changes
     # (e.g. extra CFLAGS), also creates a new target in the src/chrome
     # project file called "coverage".
     # Currently ignored on Windows.
     'coverage%': 0,
 
     # Overridable specification for potential use of alternative
     # JavaScript engines.
-    'javascript_engine%': 'v8',
+    'javascript_engine%': 'system-v8',
 
     # To do a shared build on linux we need to be able to choose between type
     # static_library and shared_library. We default to doing a static build
     # but you can override this with "gyp -Dlibrary=shared_library" or you
     # can add the following line (without the #) to ~/.gyp/include.gypi
     # {'variables': {'library': 'shared_library'}}
     # to compile as shared by default
     'library%': 'static_library',
Index: src/net/net.gyp
===================================================================
--- src.orig/net/net.gyp
+++ src/net/net.gyp
@@ -350,16 +350,24 @@
         '../base/base.gyp:base',
       ],
       'conditions': [
         ['javascript_engine=="v8"', {
           'dependencies': [
             '../v8/tools/gyp/v8.gyp:v8',
           ],
         }],
+        ['javascript_engine=="system-v8"', {
+          'dependencies': [
+            '../build/linux/system.gyp:v8',
+          ],
+          'export_dependent_settings': [
+            '../build/linux/system.gyp:v8',
+          ],
+        }],
         [ 'OS == "linux"', {
           'dependencies': [
             '../build/linux/system.gyp:gconf',
             '../build/linux/system.gyp:gdk',
             '../build/linux/system.gyp:nss',
           ],
         }],
         [ 'OS == "win"', {
